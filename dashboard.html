<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - Gateways Proxy</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <a href="dashboard.html">Gateways Proxy</a>
            </div>
            <div class="nav-menu">
                <a href="dashboard.html" class="active">Dashboard</a>
                <a href="proxies.html">Proxies</a>
                <a href="billing.html">Billing</a>
                <a href="support.html">Support</a>
                <div class="user-menu">
                    <span id="user-name">User</span>
                    <button onclick="logout()" class="btn btn-secondary">Logout</button>
                </div>
            </div>
        </div>
    </nav>

    <div class="container">
        <div class="dashboard-header">
            <h1>Welcome back, <span id="welcome-name">User</span></h1>
            <p>Here's your proxy service overview</p>
        </div>

        <div class="stats-grid">
            <div class="stat-card">
                <h3>Active Proxies</h3>
                <div class="stat-number" id="active-proxies">0</div>
                <div class="stat-change positive">+2 this week</div>
            </div>
            <div class="stat-card">
                <h3>Data Usage</h3>
                <div class="stat-number" id="data-usage">0 GB</div>
                <div class="stat-change">of 10 GB limit</div>
            </div>
            <div class="stat-card">
                <h3>Connections</h3>
                <div class="stat-number" id="connections">0</div>
                <div class="stat-change positive">24h average</div>
            </div>
            <div class="stat-card">
                <h3>Account Status</h3>
                <div class="stat-number" id="account-status">Active</div>
                <div class="stat-change">Next billing: Dec 15</div>
            </div>
        </div>

        <div class="dashboard-grid">
            <div class="dashboard-card">
                <h3>Usage Analytics</h3>
                <canvas id="usageChart"></canvas>
            </div>
            
            <div class="dashboard-card">
                <h3>Quick Actions</h3>
                <div class="quick-actions">
                    <a href="proxies.html" class="action-btn">
                        <h4>Create Proxy</h4>
                        <p>Generate new proxy endpoint</p>
                    </a>
                    <a href="billing.html" class="action-btn">
                        <h4>Upgrade Plan</h4>
                        <p>Increase your limits</p>
                    </a>
                    <a href="support.html" class="action-btn">
                        <h4>Get Support</h4>
                        <p>Contact our team</p>
                    </a>
                </div>
            </div>
            
            <div class="dashboard-card">
                <h3>Recent Activity</h3>
                <div id="recent-activity" class="activity-list">
                    <div class="activity-item">
                        <div class="activity-icon">ðŸ”—</div>
                        <div class="activity-content">
                            <div class="activity-title">Proxy endpoint created</div>
                            <div class="activity-time">2 hours ago</div>
                        </div>
                    </div>
                    <div class="activity-item">
                        <div class="activity-icon">ðŸ’³</div>
                        <div class="activity-content">
                            <div class="activity-title">Payment processed</div>
                            <div class="activity-time">1 day ago</div>
                        </div>
                    </div>
                    <div class="activity-item">
                        <div class="activity-icon">ðŸ“Š</div>
                        <div class="activity-content">
                            <div class="activity-title">Monthly report generated</div>
                            <div class="activity-time">3 days ago</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Check authentication
        function checkAuth() {
            const currentUser = localStorage.getItem('currentUser');
            const authToken = localStorage.getItem('authToken');
            
            if (!currentUser || !authToken) {
                window.location.href = 'login.html';
                return null;
            }
            
            return JSON.parse(currentUser);
        }

        // Initialize dashboard
        function initDashboard() {
            const user = checkAuth();
            if (!user) return;
            
            // Update user info
            document.getElementById('user-name').textContent = user.name;
            document.getElementById('welcome-name').textContent = user.name;
            
            // Load user data
            loadUserStats();
            createUsageChart();
        }

        // Load user statistics
        function loadUserStats() {
            const proxies = JSON.parse(localStorage.getItem('proxies') || '[]');
            const userProxies = proxies.filter(p => p.userId === JSON.parse(localStorage.getItem('currentUser')).email);
            
            document.getElementById('active-proxies').textContent = userProxies.length;
            document.getElementById('data-usage').textContent = '2.5 GB';
            document.getElementById('connections').textContent = '156';
        }

        // Create usage chart
        function createUsageChart() {
            const ctx = document.getElementById('usageChart').getContext('2d');
            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
                    datasets: [{
                        label: 'Data Usage (GB)',
                        data: [0.5, 0.8, 1.2, 0.9, 1.5, 2.1, 1.8],
                        borderColor: '#2563eb',
                        backgroundColor: 'rgba(37, 99, 235, 0.1)',
                        tension: 0.4,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    plugins: { legend: { display: false } },
                    scales: { y: { beginAtZero: true } }
                }
            });
        }

        // Logout function
        function logout() {
            localStorage.removeItem('currentUser');
            localStorage.removeItem('authToken');
            window.location.href = 'index.html';
        }

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', initDashboard);
    </script>
</body>
</html>